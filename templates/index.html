<!doctype html>
<html lang="ko">

<head>
    <!-- Required meta tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <meta property="og:title" content="ì˜í™˜ ì´ì œ ì½”ë”©í•œë‹¤!"/>
    <meta property="og:description" content="ì½”ë”©ì„ í–ˆë‹¤!!"/>
    <meta property="og:image" content="{{ url_for('static', filename='ogimage.jpg') }}"/>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>

    <title>ì›í˜ì´ì§€ì‡¼í•‘ëª°</title>

    <link href="https://fonts.googleapis.com/css2?family=Do+Hyeon&display=swap" rel="stylesheet">

    <style>
        .wrap {
            width: 500px;
            margin: auto;
        }

        * {
            font-family: 'Cute Font', cursive;
            font-family: 'Stylish', sans-serif;
        }

        .mainImg {
            width: 500px;
            height: 250px;
            margin: auto auto auto auto;

            background-image: url("https://tumblbug-pci.imgix.net/b83681fdb4beb14d5cb7655445cf667cd291db8d/7d5e7d09142907e8f7e23da40ce8bc2e3cf13daf/2644bbe41b87d6ea389ec124900e227294b76670/6cc67f31-2623-413f-94e0-f88bdc31af09.jpg?ixlib=rb-1.1.0&w=1240&h=930&auto=format%2Ccompress&lossless=true&fit=crop&s=b0ddc01d1b678044c35e852818633d37");
            background-size: cover;
            background-position: center;
        }

        .itemTitle {
            margin: 20px auto 20px auto;
            float: right;
        }

        .itemPrice {
            font-size: 20px;
        }

        .itemOrder {
            width: 500px;
            margin: 20px auto 20px auto;
        }

        .btnOrder {
            margin: auto;
            width: 100px;
            display: block;
        }

        .exchangeRate {
            color: blue;
        }

    </style>
    <script>

        $(document).ready(function () {
            $.ajax({
                type: "GET",
                url: "https://api.manana.kr/exchange/rate.json",
                data: {},
                success: function (response) {
                    let nowRate = response[1]['rate'];
                    $('#rate-box').text(nowRate);
                }
            })
            order_listing();
        });

        function order_listing() {
            $.ajax({
                type: "GET",
                url: "/order",
                data: {},
                success: function (response) {
                    if (response["result"] == "success") {
                        let orders = response['orders'];
                        for (let i = 0; i < orders.length; i++) {
                            let name = orders[i]['name'];
                            let count = orders[i]['count'];
                            let address = orders[i]['address'];
                            let phone = orders[i]['phone']
                            let temp_html = `<tr>
                                                <th scope="row">${name}</th>
                                                <td>${count}</td>
                                                <td>${address}</td>
                                                <td>${phone}</td>
                                            </tr>`

                            $('#orderlist').append(temp_html)

                        }

                    } else {
                        alert("ë¦¬ë·°ë¥¼ ë°›ì•„ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤");
                    }
                }
            })


        }

        function order() {
            let name = $('#order-name').val();
            let count = $('#order-count').val();
            let address = $('#order-address').val();
            let phone = $('#order-phone').val();

            if (name == '') {
                alert('ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”');
            } else if (count == '-- ìˆ˜ëŸ‰ì„ ì„ íƒí•˜ì„¸ìš” --') {
                alert('ìˆ˜ëŸ‰ì„ ì…ë ¥í•˜ì„¸ìš”');
            } else if (address == '') {
                alert('ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”');
            } else if (phone == '') {
                alert('ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”');
            } else {
                $.ajax({
                    type: "POST",
                    url: "/order",
                    data: {name_give: name, count_give: count, address_give: address, phone_give: phone},
                    success: function (response) {
                        if (response["result"] == "success") {
                            alert(response["msg"]);
                            window.location.reload();
                        }
                    }
                })
            }
        }
    </script>
</head>

<body>
<div class="wrap">
    <div class="mainImg">
    </div>

    <div class="itemTitle">
        <div>
            <h1>2020ë…„ ì¼ë ¥ <span class="itemPrice">ê°€ê²© : 27,000ì›/1ê°œ</span></h1>
            <p>ë‹¹ì‹ ì˜ ë¹›ë‚˜ëŠ” í•˜ë£¨í•˜ë£¨ë¥¼ ëœ»ê¹Šê²Œ ê¸°ë¡í•˜ê³  ì‹¶ì€ ë°”ë¨ìœ¼ë¡œ ë§Œë“¤ì–´ì¡ŒìŠµë‹ˆë‹¤.
                ë‹¬ë ¥ í‘œì§€ì— ë“¤ì–´ê°€ëŠ” '2020' ì¼ëŸ¬ìŠ¤íŠ¸ëŠ” ì¶•í•˜ë¥¼ ì˜ë¯¸í•˜ëŠ” íŒŒí‹° í’ì„ ì„ ëª¨í‹°ë¸Œë¡œ ë””ìì¸ë˜ì—ˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ë„ ì¶•í•˜ì˜ ë§ˆìŒì„ ë‹´ì•„ ë¹›ë‚˜ëŠ” 20ëŒ€ì¸ ë‚˜ì—ê²Œ, ì„¤ë ˆëŠ” 20ì‚´ì„ ë§ì´í•˜ëŠ” ì†Œì¤‘í•œ
                ì´ì—ê²Œ
                ì„ ë¬¼í•´ì£¼ì„¸ìš”. 20ëŒ€ê°€ ì§€ë‚˜ê°”ë”ë¼ë„ ê´œì°®ì•„ìš”!
                ë§ˆìŒì€ ì—¬ì „íˆ 20ëŒ€ì¸ ê²ƒì„ ì•„ë‹ˆê¹Œìš”.ğŸ˜Š</p>
        </div>
    </div>
    <div>
        <p class="exchangeRate">ë‹¬ëŸ¬-ì› í™˜ìœ¨ : <span id="exchangeRate"> </span></p>
    </div>


    <div class="itemOrder">
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <div class="input-group-text">ì£¼ë¬¸ì ì´ë¦„</div>
            </div>
            <input type="text" class="form-control" id="inlineFormInputGroup" placeholder="">
        </div>
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <div class="input-group-text">ìˆ˜ëŸ‰</div>
            </div>
            <select class="custom-select" id="inputGroupSelect01">
                <option selected>--ìˆ˜ëŸ‰ì„ ì„ íƒí•˜ì„¸ìš”--</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
            </select>
        </div>
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <div class="input-group-text">ì£¼ì†Œ</div>
            </div>
            <input type="text" class="form-control" id="inlineFormInputGroup" placeholder="">
        </div>
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <div class="input-group-text">ì „í™”ë²ˆí˜¸</div>
            </div>
            <input type="text" class="form-control" id="inlineFormInputGroup" placeholder="">
        </div>
    </div>
    <div class="btnOrder">
        <button type="button" onclick="order()" class="btn btn-primary">ì£¼ë¬¸í•˜ê¸°</button>
    </div>
</div>
</body>

</html>